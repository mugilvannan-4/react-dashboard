{"ast":null,"code":"import _regeneratorRuntime from\"D:/ReactJS/GIT/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"D:/ReactJS/GIT/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"D:/ReactJS/GIT/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import'./Login.css';import Register from'./Register';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function loginUser(_x){return _loginUser.apply(this,arguments);}function _loginUser(){_loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(credentials){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",fetch('https://dash-auth.herokuapp.com/user/authenticate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",data.json());case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref.apply(this,arguments);};}()));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _loginUser.apply(this,arguments);}function Login(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),regfirstname=_useState6[0],setRegfirstname=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),reglastname=_useState8[0],setRegLastname=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),reguser=_useState10[0],setReguser=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),regpsswd=_useState12[0],setRegpsswd=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),regcnfpwd=_useState14[0],setRegcnfpwd=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),message=_useState16[0],setMessage=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),regmessage=_useState18[0],setRegmessage=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),signupstate=_useState20[0],setSignupstate=_useState20[1];function handleSubmit(_x2){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return loginUser({username:username,password:password});case 3:token=_context.sent;if(token.token){props.setToken(token);window.location.href='/react-dashboard/#/dashboard';}else{setMessage(token.message);}case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleregister(e){console.log(e);e.preventDefault();if(regpsswd!==regcnfpwd){setMessage(\"Passwords are not matching :(\");}else{console.log(\"calling API\");}}function handlesignup(){var sgnp=signupstate;sgnp=!sgnp;setSignupstate(sgnp);}return/*#__PURE__*/_jsxs(\"div\",{className:\"login-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Bon voyage\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-entry\",onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setUserName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"h1\",{children:message}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"buttons\",type:\"Submit\",children:\"Sign In\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"buttons\",type:\"button\",onClick:function onClick(){return handlesignup();},children:\"Sign Up\"})})]}),signupstate===true&&/*#__PURE__*/_jsx(Register,{})]});}export default Login;","map":{"version":3,"sources":["D:/ReactJS/GIT/react-dashboard/src/components/Login/Login.js"],"names":["React","useState","Register","useHistory","loginUser","credentials","fetch","method","headers","body","JSON","stringify","then","data","json","Login","props","username","setUserName","password","setPassword","regfirstname","setRegfirstname","reglastname","setRegLastname","reguser","setReguser","regpsswd","setRegpsswd","regcnfpwd","setRegcnfpwd","message","setMessage","regmessage","setRegmessage","signupstate","setSignupstate","handleSubmit","e","preventDefault","token","setToken","window","location","href","handleregister","console","log","handlesignup","sgnp","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport './Login.css';\r\nimport Register from './Register';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nasync function loginUser(credentials) {\r\n\r\n    return fetch('https://dash-auth.herokuapp.com/user/authenticate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(credentials)\r\n      })\r\n        .then(async (data) => data.json())\r\n}\r\n\r\nfunction Login(props) {\r\n    const [username, setUserName] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [regfirstname, setRegfirstname] = useState();\r\n    const [reglastname, setRegLastname] = useState();\r\n    const [reguser, setReguser] = useState();\r\n    const [regpsswd, setRegpsswd] = useState();\r\n    const [regcnfpwd, setRegcnfpwd] = useState();\r\n    const [message, setMessage] = useState('');\r\n    const [regmessage, setRegmessage] = useState('');\r\n    const [signupstate, setSignupstate] = useState(false);\r\n    async function handleSubmit(e){\r\n        e.preventDefault();\r\n        const token = await loginUser({\r\n            username,\r\n            password\r\n        }); \r\n        if(token.token){\r\n        props.setToken(token);\r\n        window.location.href = '/react-dashboard/#/dashboard'\r\n        } else {\r\n         setMessage(token.message);   \r\n        }\r\n\r\n    }\r\n\r\n    function handleregister(e) {\r\n        console.log(e);\r\n        e.preventDefault();\r\n        if(regpsswd !== regcnfpwd ){\r\n            setMessage(\"Passwords are not matching :(\")\r\n        }\r\n        else {\r\n            console.log(\"calling API\");\r\n        }\r\n    }\r\n\r\n    function handlesignup() {\r\n        var sgnp = signupstate;\r\n        sgnp = !sgnp;\r\n        setSignupstate(sgnp);\r\n    }\r\n    return(\r\n        <div className=\"login-wrapper\">\r\n            <h1>Bon voyage</h1>\r\n            <form className=\"login-entry\" onSubmit={(e) => handleSubmit(e)}>\r\n                <label>\r\n                    <p>Username</p>\r\n                    <input type=\"text\"  onChange={(e) => setUserName(e.target.value)}/>\r\n                </label>\r\n                <label>\r\n                    <p>Password</p>\r\n                    <input type=\"password\" onChange={(e) => setPassword(e.target.value)}/>\r\n                </label>\r\n                <h1>{message}</h1>\r\n                <div>\r\n                    <button className=\"buttons\" type=\"Submit\">Sign In</button>\r\n                </div>\r\n                <div>\r\n                    <button className=\"buttons\" type=\"button\" onClick={() => handlesignup()}>Sign Up</button>\r\n                </div>\r\n            </form>\r\n            {signupstate === true &&\r\n                <Register />\r\n                }\r\n        </div>\r\n\r\n    \r\n    )\r\n\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}